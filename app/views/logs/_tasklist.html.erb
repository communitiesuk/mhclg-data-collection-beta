<ol class="app-task-list govuk-!-margin-top-8">
  <% @log.form.sections.each do |section| %>
    <% next unless section.displayed_in_tasklist?(@log) %>
    <li>
      <h2 class="app-task-list__section-heading">
        <%= section.label %>
      </h2>
      <% if section.description %>
        <p class="govuk-body"><%= section.description.html_safe %></p>
      <% end %>
      <ul class="govuk-task-list app-task-list__items">
        <% section.subsections.each do |subsection| %>
          <% if subsection.displayed_in_tasklist?(@log) && (subsection.applicable_questions(@log).count > 0 || !subsection.enabled?(@log)) %>
            <% subsection_status = subsection.status(@log) %>
            <li class="govuk-task-list__item <%= tasklist_link_class(subsection_status) %> app-task-list__item">
              <div class="govuk-task-list__name-and-hint app-task-list__task-name" id="<%= subsection.id.dasherize %>">
                <%= subsection_link(subsection, @log, current_user) %>
              </div>
              <%= status_tag(subsection_status, "app-task-list__tag") %>
            </li>
          <% end %>
        <% end %>
      </ul>
    </li>
  <% end %>
</ol>
