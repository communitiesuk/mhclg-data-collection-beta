<%= render partial: "form/interruption_screen_banner", locals: { question:, title_text:, informative_text:, lettings_log: } %>

<h1 class="govuk-heading-m">
  Make sure these answers are all correct
</h1>
<div class="x-govuk-summary-card govuk-!-margin-bottom-6">
  <div class="x-govuk-summary-card__body">
    <%= govuk_summary_list do |summary_list| %>
      <% soft_validation_affected_questions(question, @log).each do |affected_question| %>
      <% if affected_question.page.routed_to?(@log, current_user) %>
          <% summary_list.row do |row| %>
            <% row.key { get_question_label(affected_question) } %>
            <% row.value do %>
                <%= simple_format(
                  get_answer_label(affected_question, @log),
                  wrapper_tag: "span",
                  class: "govuk-!-margin-right-4",
                ) %>
              <% extra_value = affected_question.get_extra_check_answer_value(@log) %>
              <% if extra_value && affected_question.answer_label(@log, current_user).present? %>
                <%= simple_format(
                  extra_value,
                  wrapper_tag: "span",
                  class: "govuk-!-font-weight-regular app-!-colour-muted",
                ) %>
              <% end %>
              <% affected_question.get_inferred_answers(@log).each do |inferred_answer| %>
                <span class="govuk-!-font-weight-regular app-!-colour-muted"><%= inferred_answer %></span>
              <% end %>
            <% end %>
            <% if @log.collection_period_open? %>
              <% row.action(
                text: affected_question.action_text(@log),
                href: interruption_action_href(@log, affected_question.page.id),
                visually_hidden_text: affected_question.check_answer_label.to_s.downcase,
              ) %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>

<%= f.hidden_field question.id, value: "0" %>
<div class="govuk-button-group">
  <%= f.govuk_submit "Confirm and continue" %>
  <%= govuk_link_to(
    (@page.skip_text || "Skip for now"),
    (@page.skip_href(@log) || send(@log.form.next_page_redirect_path(@page, @log, current_user), @log)),
  ) %>
</div>
